---
title: I18n
description: Type-safe i18n for Next.js with next-international
---

## Installation

<InstallCommand feature="i18n" />

---

## What is Installed

### Pages

| File | Path | Description |
|------|------|-------------|
| `page.tsx` | `app/[locale]/[...rest]/page.tsx` | 404 catch-all page |

### Components

| File | Path | Description |
|------|------|-------------|
| `language-switcher.tsx` | `components/language-switcher.tsx` | Language picker dropdown |

### Middleware

| File | Path | Description |
|------|------|-------------|
| `middleware.ts` | `middleware.ts` | i18n middleware (needs merge if existing) |

### Locales

| File | Path | Description |
|------|------|-------------|
| `client.ts` | `locales/client.ts` | Client-side i18n setup |
| `server.ts` | `locales/server.ts` | Server-side i18n setup |
| `en.ts` | `locales/en.ts` | English translations |
| `en.ts` | `locales/not-found/en.ts` | 404 page translations |

---

## What's Next

<Steps>

### Move app files into [locale] folder

Move your existing app routes into a `[locale]` dynamic segment:

**Before:**
```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ globals.css
â”œâ”€â”€ api/
â”œâ”€â”€ page.tsx
â””â”€â”€ about/
```

**After:**
```
app/
â”œâ”€â”€ globals.css         # Keep at root
â”œâ”€â”€ api/                # Keep at root
â””â”€â”€ [locale]/
    â”œâ”€â”€ layout.tsx      # Move here
    â”œâ”€â”€ page.tsx        # Move here
    â”œâ”€â”€ about/          # Move here
    â””â”€â”€ [...rest]/      # Installed by registry (404)
```

### Update root layout

Add locale parameter support to your layout:

```tsx title="app/[locale]/layout.tsx"
import type { ReactNode } from 'react';

export default async function RootLayout({
  children,
  params,
}: {
  children: ReactNode;
  params: Promise<{ locale: string }>;
}) {
  const { locale } = await params;

  return (
    <html lang={locale} suppressHydrationWarning>
      <body>{children}</body>
    </html>
  );
}
```

### Merge middleware (if you have one)

If you already have a `middleware.ts` file, merge the i18n middleware:

```tsx title="middleware.ts"
import { createI18nMiddleware } from 'next-international/middleware';
import { NextResponse, type NextRequest } from 'next/server';

const I18nMiddleware = createI18nMiddleware({
  locales: ['en'],
  defaultLocale: 'en',
  urlMappingStrategy: 'rewrite',
});

export function middleware(request: NextRequest) {
  // Run i18n middleware first
  const i18nResponse = I18nMiddleware(request);
  if (i18nResponse) return i18nResponse;

  // Your custom middleware logic here
  return NextResponse.next();
}

export const config = {
  matcher: ['/((?!api|_next|.*\\..*).*)'],
};
```

### Test the installation

Navigate to `/` and verify translations load correctly.

</Steps>

---

## API Reference

### Server Functions

#### getI18n

Gets the full translation object for server-side usage.

```tsx
import { getI18n } from '@/locales/server';

export default async function Page() {
  const t = await getI18n();
  return <h1>{t('notFound.title')}</h1>;
}
```

**Returns:** `Promise<(key: string) => string>`

---

#### getScopedI18n

Gets a scoped translator for a specific namespace.

```tsx
import { getScopedI18n } from '@/locales/server';

export default async function Page() {
  const t = await getScopedI18n('notFound');
  return <h1>{t('title')}</h1>;
}
```

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| `namespace` | `string` | Translation namespace |

**Returns:** `Promise<(key: string) => string>`

---

#### getCurrentLocale

Gets the current locale code.

```tsx
import { getCurrentLocale } from '@/locales/server';

export default async function Page() {
  const locale = await getCurrentLocale();
  console.log(locale); // 'en'
}
```

**Returns:** `Promise<string>`

---

#### getStaticParams

Gets all locales for static generation.

```tsx
import { getStaticParams } from '@/locales/server';

export const generateStaticParams = getStaticParams();
```

**Returns:** `() => { locale: string }[]`

---

### Client Hooks

#### useI18n

Gets the full translation object for client-side usage.

```tsx
'use client';

import { useI18n } from '@/locales/client';

export function Component() {
  const t = useI18n();
  return <p>{t('notFound.title')}</p>;
}
```

**Returns:** `(key: string) => string`

---

#### useScopedI18n

Gets a scoped translator for a specific namespace.

```tsx
'use client';

import { useScopedI18n } from '@/locales/client';

export function Component() {
  const t = useScopedI18n('notFound');
  return <p>{t('title')}</p>;
}
```

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| `namespace` | `string` | Translation namespace |

**Returns:** `(key: string) => string`

---

#### useCurrentLocale

Gets the current locale code.

```tsx
'use client';

import { useCurrentLocale } from '@/locales/client';

export function Component() {
  const locale = useCurrentLocale();
  return <p>Current: {locale}</p>;
}
```

**Returns:** `string`

---

#### useChangeLocale

Returns a function to change the current locale.

```tsx
'use client';

import { useChangeLocale } from '@/locales/client';

export function LanguageButton() {
  const changeLocale = useChangeLocale();

  return (
    <button onClick={() => changeLocale('pt')}>
      Switch to Portuguese
    </button>
  );
}
```

**Returns:** `(locale: string) => void`

---

#### I18nProviderClient

Provider component for client-side i18n context.

```tsx
'use client';

import { I18nProviderClient } from '@/locales/client';

export function Providers({ children, locale }: { children: React.ReactNode; locale: string }) {
  return (
    <I18nProviderClient locale={locale}>
      {children}
    </I18nProviderClient>
  );
}
```

**Props:**

| Prop | Type | Description |
|------|------|-------------|
| `locale` | `string` | Current locale code |
| `children` | `ReactNode` | Child components |

---

### Middleware

#### createI18nMiddleware

Creates the i18n middleware for locale detection and routing.

```tsx
import { createI18nMiddleware } from 'next-international/middleware';

const I18nMiddleware = createI18nMiddleware({
  locales: ['en', 'pt'],
  defaultLocale: 'en',
  urlMappingStrategy: 'rewrite',
});
```

**Options:**

| Option | Type | Description |
|--------|------|-------------|
| `locales` | `string[]` | Supported locales |
| `defaultLocale` | `string` | Default/fallback locale |
| `urlMappingStrategy` | `'rewrite' \| 'redirect'` | URL handling strategy |

---

### Translation File Structure

Translation files export a constant object with `as const`:

```tsx title="locales/en.ts"
import notFound from './not-found/en';

export default {
  notFound,
} as const;
```

```tsx title="locales/not-found/en.ts"
export default {
  title: 'Page Not Found',
  description: 'The page you are looking for does not exist.',
  backHome: 'Back to Home',
} as const;
```

**Type Safety Requirements:**

- Always use `as const` for type inference
- Namespace imports must match across all locales
- Keys must be identical across all locale files

---

### Adding a New Locale

To add a new locale (e.g., Portuguese):

1. Create locale files:
```tsx title="locales/pt.ts"
import notFound from './not-found/pt';

export default {
  notFound,
} as const;
```

2. Update `locales/client.ts`:
```tsx
export const { ... } = createI18nClient({
  en: () => import('./en'),
  pt: () => import('./pt'),
});
```

3. Update `locales/server.ts`:
```tsx
export const { ... } = createI18nServer({
  en: () => import('./en'),
  pt: () => import('./pt'),
});
```

4. Update `middleware.ts`:
```tsx
const I18nMiddleware = createI18nMiddleware({
  locales: ['en', 'pt'],
  defaultLocale: 'en',
  urlMappingStrategy: 'rewrite',
});
```

5. Update `components/language-switcher.tsx`:
```tsx
const locales = [
  { code: 'en', name: 'English', flag: 'ðŸ‡ºðŸ‡¸' },
  { code: 'pt', name: 'PortuguÃªs', flag: 'ðŸ‡§ðŸ‡·' },
];
```
